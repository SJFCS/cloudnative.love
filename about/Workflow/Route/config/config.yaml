##########################################################################
#                               è®¢é˜…åœ°å€                                 #
##########################################################################
proxy-providers:
  # https://proxy-provider-converter.vercel.app/
  mojie:
    type: http
    url: http://archlinux.lan:38324/download/mojie?target=ClashMeta
    proxy: DIRECT #ç»è¿‡æŒ‡å®šä»£ç†è¿›è¡Œä¸‹è½½/æ›´æ–°
    interval: 3600
    health-check:
      enable: true
      interval: 600
      lazy: true
      url: http://www.gstatic.com/generate_204
  ssrdog:
    type: http
    url: http://archlinux.lan:38324/download/ssrdog?target=ClashMeta
    proxy: DIRECT #ç»è¿‡æŒ‡å®šä»£ç†è¿›è¡Œä¸‹è½½/æ›´æ–°
    interval: 3600
    health-check:
      enable: true
      interval: 600
      lazy: true
      url: http://www.gstatic.com/generate_204
##########################################################################
#                               æœåŠ¡é…ç½®                                 #
##########################################################################
mode: rule # è§„åˆ™æ¨¡å¼ï¼šruleï¼ˆè§„åˆ™ï¼‰ / globalï¼ˆå…¨å±€ä»£ç†ï¼‰/ directï¼ˆå…¨å±€ç›´è¿ï¼‰
mixed-port: 7890 # HTTP(S) and SOCKS5 å…±ç”¨ç«¯å£
port: 7891 # HTTP ä»£ç†ç«¯å£
socks-port: 7892 # SOCKS5 ä»£ç†ç«¯å£
redir-port: 7893 # Linux å’Œ macOS çš„ redir é€æ˜ä»£ç†ç«¯å£ (é‡å®šå‘ TCP å’Œ TProxy UDP æµé‡)
tproxy-port: 7894 # Linux çš„é€æ˜ä»£ç†ç«¯å£ï¼ˆé€‚ç”¨äº TProxy TCP å’Œ TProxy UDP æµé‡)

log-level: info # silent / info / warning / error / debug
allow-lan: true # å…è®¸å±€åŸŸç½‘çš„è¿æ¥ï¼ˆå…±äº«ä»£ç†ï¼‰
authentication:
  - vkmJQ7:hheZVs45ePgdbn
ipv6: true # å¼€å¯ IPv6 æ€»å¼€å…³ï¼Œå…³é—­é˜»æ–­æ‰€æœ‰ IPv6 é“¾æ¥å’Œå±è”½ DNS è¯·æ±‚ AAAA è®°å½•
udp: true # æ˜¯å¦å…è®¸ UDP é€šè¿‡ä»£ç†ï¼Œé»˜è®¤ä¸º false

unified-delay: true # å¼€å¯ç»Ÿä¸€å»¶è¿Ÿæ—¶ï¼Œä¼šè¿›è¡Œä¸¤æ¬¡å»¶è¿Ÿæµ‹è¯•ï¼Œä»¥æ¶ˆé™¤è¿æ¥æ¡æ‰‹ç­‰å¸¦æ¥çš„ä¸åŒç±»å‹èŠ‚ç‚¹çš„å»¶è¿Ÿå·®å¼‚ï¼Œå¯é€‰å€¼ true/false
tcp-concurrent: true # TCP å¹¶å‘
find-process-mode: "off" # strict|off è·¯ç”±å™¨æ¨è off å…³é—­è¿›ç¨‹åŒ¹é…
global-client-fingerprint: random # éšæœºå…¨å±€å®¢æˆ·ç«¯æŒ‡çº¹

profile:
  store-selected: true # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

external-controller: :9090 # clash çš„ RESTful API ç›‘å¬åœ°å€
# external-controller-tls: :9443
# tls:
#   certificate: string # è¯ä¹¦ PEM æ ¼å¼ï¼Œæˆ–è€… è¯ä¹¦çš„è·¯å¾„
#   private-key: string # è¯ä¹¦å¯¹åº”çš„ç§é’¥ PEM æ ¼å¼ï¼Œæˆ–è€…ç§é’¥è·¯å¾„
external-ui: metacubexd-gh-pages
external-ui-url: "https://mirror.ghproxy.com/https://github.com/MetaCubeX/metacubexd/archive/refs/heads/gh-pages.zip"
secret: hkvmQ7ZPgdbnheJVs45e

geodata-mode: false # é»˜è®¤å€¼ false
geodata-loader: memconservative # GEO æ–‡ä»¶åŠ è½½æ¨¡å¼ï¼Œstandardï¼šæ ‡å‡†åŠ è½½å™¨ memconservativeï¼šä¸“ä¸ºå†…å­˜å—é™ (å°å†…å­˜) è®¾å¤‡ä¼˜åŒ–çš„åŠ è½½å™¨ (é»˜è®¤å€¼)
geo-auto-update: true # è‡ªåŠ¨æ›´æ–° GEO
geo-update-interval: 24 # æ›´æ–°é—´éš”ï¼Œå•ä½ä¸ºå°æ—¶
geox-url:
  geoip: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat"
  geosite: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat"
  mmdb: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  asn: "https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb"
  # "geoip": "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat",
  # "geosite": "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat",
  # "mmdb": "https://mirror.ghproxy.com/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb",
  # "asn": "https://mirror.ghproxy.com/https://github.com/xishang0128/geoip/releases/download/latest/GeoLite2-ASN.mmdb"
# https://github.com/misakaio/chnroutes2/tree/master
# routing-mark: 6666
tun:
  enable: false
  stack: mixed # tun æ¨¡å¼å †æ ˆ,å¯ç”¨å€¼ï¼šsystem/gvisor/mixed
  device: Mihomo
  mtu: 1500
  dns-hijack:
    - "any:53"
  auto-route: true # è‡ªåŠ¨è®¾ç½®å…¨å±€è·¯ç”±ï¼Œå¯ä»¥è‡ªåŠ¨å°†å…¨å±€æµé‡è·¯ç”±è¿›å…¥ tun ç½‘å¡
  auto-redirect: false
  auto-detect-interface: true # è‡ªåŠ¨é€‰æ‹©æµé‡å‡ºå£æ¥å£ï¼Œå¤šå‡ºå£ç½‘å¡åŒæ—¶è¿æ¥çš„è®¾å¤‡å»ºè®®æ‰‹åŠ¨æŒ‡å®šå‡ºå£ç½‘å¡
  strict-route: true

# DNS æœåŠ¡å™¨å’Œå»ºç«‹è¿æ¥æ—¶çš„ é™æ€ Hosts, ä»…åœ¨ dns.enhanced-mode æ¨¡å¼ä¸º redir-host ç”Ÿæ•ˆ
# æ”¯æŒé€šé…ç¬¦åŸŸå (ä¾‹å¦‚: *.clash.dev, *.foo.*.example.com )
# ä¸ä½¿ç”¨é€šé…ç¬¦çš„åŸŸåä¼˜å…ˆçº§é«˜äºä½¿ç”¨é€šé…ç¬¦çš„åŸŸå (ä¾‹å¦‚: foo.example.com > *.example.com > .example.com )
# hosts:
# '*.clash.dev': 127.0.0.1
# '.dev': 127.0.0.1
# 'alpha.clash.dev': '::1'
# 'dnslog.cn: 47.244.138.18'
# unified-delay: true
# dnslog.cn: 47.244.138.18
# DNS æœåŠ¡å™¨é…ç½®(å¯é€‰ï¼›è‹¥ä¸é…ç½®ï¼Œç¨‹åºå†…ç½®çš„ DNS æœåŠ¡ä¼šè¢«å…³é—­)
dns:
  enable: true
  prefer-h3: true
  # å¯¹äºæ”¯æŒ http3 çš„ Doh ä¼šå¯åŠ¨å¹¶å‘æŸ¥è¯¢ï¼Œå¦‚æœå¯¹æ–¹æ”¯æŒï¼Œé€Ÿåº¦æ›´å¿«
  # dns over HTTP3 ä¼šæ¯” doH è¦å¿«ã€‚
  ipv6: false # å½“æ­¤é€‰é¡¹ä¸º false æ—¶, AAAA è¯·æ±‚å°†è¿”å›ç©º
  listen: :1053
  enhanced-mode: redir-host
  use-hosts: false
  use-system-hosts: false
  # ä»¥ä¸‹å¡«å†™çš„ DNS æœåŠ¡å™¨å°†ä¼šè¢«ç”¨æ¥è§£æ DNS æœåŠ¡çš„åŸŸå
  # ä»…å¡«å†™ DNS æœåŠ¡å™¨çš„ IP åœ°å€
  default-nameserver:
    - 8.8.8.8
    - 1.1.1.1
  # æ‰€æœ‰ DNS è¯·æ±‚å°†ä¼šç›´æ¥å‘é€åˆ°æœåŠ¡å™¨ï¼Œä¸ç»è¿‡ä»»ä½•ä»£ç†ã€‚
  # å¹¶å‘æŸ¥è¯¢è·å–æœ€å…ˆè¿”å›çš„ç»“æœ
  nameserver:
    - https://dns.google/dns-query
    - https://cloudflare-dns.com/dns-query
  nameserver-policy:
    "geosite:category-ads-all":
      - rcode://success
    "geosite:microsoft@cn,apple-cn,google-cn,category-games@cn,cn,private":
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
# åŸŸåå—…æ¢
sniffer:
  enable: true
  force-dns-mapping: true # å¯¹ redir-host ç±»å‹è¯†åˆ«çš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  parse-pure-ip: true # å¯¹æ‰€æœ‰æœªè·å–åˆ°åŸŸåçš„æµé‡è¿›è¡Œå¼ºåˆ¶å—…æ¢
  override-destination: true # æ˜¯å¦ä½¿ç”¨å—…æ¢ç»“æœä½œä¸ºå®é™…è®¿é—®ï¼Œé»˜è®¤ä¸º true
  # force-domain:  #éœ€è¦å¼ºåˆ¶å—…æ¢çš„åŸŸåï¼Œé»˜è®¤åªå¯¹IPå—…æ¢
  #   - "+" #å»æ‰æ³¨é‡Šåç­‰äºå…¨å±€å—…æ¢
  #   - "google.com"
  skip-domain:
    - +.lan
    - +.local
    - +.direct
    - +.msftconnecttest.com
    - +.msftncsi.com
    - "Mijia Cloud"
    - "dlg.io.mi.com"
    - "+.push.apple.com"
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443

proxy-groups:
  - name: æ‰‹åŠ¨åˆ‡æ¢
    type: select
    proxies:
      - è‡ªåŠ¨é€‰æ‹©
      - è‡ªåŠ¨å›é€€
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
      - DIRECT
    include-all: true
    url: https://www.gstatic.com/generate_204
    interval: 300

  - name: è‡ªåŠ¨é€‰æ‹© # url-testï¼ˆå»¶è¿Ÿæœ€ä½èŠ‚ç‚¹ï¼‰
    type: url-test
    include-all: true
    tolerance: 10
    udp: true

  - name: è‡ªåŠ¨å›é€€
    type: fallback
    include-all: true
    url: https://www.gstatic.com/generate_204
    interval: 300

  # åœ°åŒºåˆ†ç»„
  - name: ğŸ‡­ğŸ‡° Hong Kong
    type: select
    include-all: true
    filter: "(?i)æ¸¯|hk|hongkong|hong kong"
  - name: ğŸ‡¨ğŸ‡³ Taiwan
    type: select
    include-all: true
    filter: "(?i)å°|tw|taiwan"
  - name: ğŸ‡¯ğŸ‡µ Japan
    type: select
    include-all: true
    filter: "(?i)æ—¥|jp|japan"
  - name: ğŸ‡ºğŸ‡¸ United States
    type: select
    include-all: true
    filter: (?i)ç¾|us|unitedstates|united states|æ´›æ‰çŸ¶|åœ£ä½•å¡
  - name: ğŸ‡¸ğŸ‡¬ Singapore
    type: select
    include-all: true
    filter: (?i)(æ–°|sg|singapore)
  - name: å…¶å®ƒåœ°åŒº
    type: select
    include-all: true
    filter: (?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|us|unitedstates)).*

  # åº”ç”¨åˆ†ç»„
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: AI
    type: select
    proxies: &proxies
      - æ‰‹åŠ¨åˆ‡æ¢
      - ğŸ‡­ğŸ‡° Hong Kong
      - ğŸ‡¨ğŸ‡³ Taiwan
      - ğŸ‡¸ğŸ‡¬ Singapore
      - ğŸ‡¯ğŸ‡µ Japan
      - ğŸ‡ºğŸ‡¸ United States
    filter: (?i)gpt|openai
    include-all: true
    icon: https://raw.githubusercontent.com/Orz-3/mini/master/Color/OpenAI.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: å›½å¤–ç½‘ç«™
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Global.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: å›½é™…åª’ä½“
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/YouTube.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: è‹¹æœæœåŠ¡
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple_1.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: å¾®è½¯æœåŠ¡
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: è°·æ­ŒæœåŠ¡
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Google_Search.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: ç”µæŠ¥æ¶ˆæ¯
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Telegram.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: æ¨ç‰¹æ¶ˆæ¯
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Twitter.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: æ¸¸æˆå¹³å°
    type: select
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Game.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: Emby
    type: select
    include-all: true
    proxies: *proxies
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Emby.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Advertising.png
  - interval: 300
    url: http://1.1.1.1/generate_204
    max-failed-times: 3
    name: å…œåº•åˆ†æµ
    type: select
    proxies:
      - DIRECT
      - æ‰‹åŠ¨åˆ‡æ¢
    icon: https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Final.png

# è§„åˆ™é›†
rule-providers:
  ChatGPT:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/G4free/clash-ruleset/main/ruleset/ChatGPT.yaml"
    path: ./ruleset/ChatGPT.yaml
    interval: 86400
  AD:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Reject.list
    path: ./rules/AD.list
  Apple:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Apple.list
    path: ./rules/Apple.list
  Google:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Google.list
    path: ./rules/Google.list
  YouTube:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/YouTube.list
    path: ./rules/YouTube.list
  Telegram:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Telegram.list
    path: ./rules/Telegram.list
  Twitter:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Twitter.list
    path: ./rules/Twitter.list
  Steam:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Steam.list
    path: ./rules/Steam.list
  Epic:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Epic.list
    path: ./rules/Epic.list
  AI:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/AI.list
    path: ./rules/AI.list
  Emby:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Emby.list
    path: ./rules/Emby.list
  Spotify:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Spotify.list
    path: ./rules/Spotify.list
  Bahamut:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Bahamut.list
    path: ./rules/Bahamut.list
  Netflix:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Netflix.list
    path: ./rules/Netflix.list
  Disney:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Disney.list
    path: ./rules/Disney.list
  PrimeVideo:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/PrimeVideo.list
    path: ./rules/PrimeVideo.list
  HBO:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/HBO.list
    path: ./rules/HBO.list
  OneDrive:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/OneDrive.list
    path: ./rules/OneDrive.list
  Github:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Github.list
    path: ./rules/Github.list
  Microsoft:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Microsoft.list
    path: ./rules/Microsoft.list
  Lan:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/Lan.list
    path: ./rules/Lan.list
  ProxyGFW:
    type: http
    interval: 86400
    behavior: classical
    url: https://github.com/Repcz/Tool/raw/X/Clash/Rules/ProxyGFW.list
    path: ./rules/ProxyGFW.list
rules:
  - RULE-SET,AD,å¹¿å‘Šæ‹¦æˆª
  - GEOSITE,google,å›½å¤–ç½‘ç«™
  - GEOSITE,github,å›½å¤–ç½‘ç«™
  - GEOSITE,youtube,å›½å¤–ç½‘ç«™
  - GEOSITE,geolocation-!cn,å›½å¤–ç½‘ç«™
  - RULE-SET,ChatGPT,AI
  - RULE-SET,AI,AI
  - RULE-SET,Apple,è‹¹æœæœåŠ¡
  - RULE-SET,YouTube,è°·æ­ŒæœåŠ¡
  - RULE-SET,Google,è°·æ­ŒæœåŠ¡
  - RULE-SET,Telegram,ç”µæŠ¥æ¶ˆæ¯
  - RULE-SET,Twitter,æ¨ç‰¹æ¶ˆæ¯
  - RULE-SET,Steam,æ¸¸æˆå¹³å°
  - RULE-SET,Epic,æ¸¸æˆå¹³å°
  - RULE-SET,Emby,Emby
  - RULE-SET,Spotify,å›½é™…åª’ä½“
  - RULE-SET,Bahamut,å›½é™…åª’ä½“
  - RULE-SET,Netflix,å›½é™…åª’ä½“
  - RULE-SET,Disney,å›½é™…åª’ä½“
  - RULE-SET,PrimeVideo,å›½é™…åª’ä½“
  - RULE-SET,HBO,å›½é™…åª’ä½“
  - GEOSITE,onedrive,å¾®è½¯æœåŠ¡
  - GEOSITE,github,å¾®è½¯æœåŠ¡
  - GEOSITE,microsoft,å¾®è½¯æœåŠ¡
  - GEOSITE,gfw,å›½å¤–ç½‘ç«™
  - GEOIP,LAN,DIRECT,no-resolve
  - GEOIP,CN,DIRECT,no-resolve
  - GEOSITE,CN,DIRECT,no-resolve
  - MATCH,å…œåº•åˆ†æµ
