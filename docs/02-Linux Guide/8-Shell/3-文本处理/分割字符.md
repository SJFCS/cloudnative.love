https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/

åœ¨é«˜çº§ç¨‹åºè¯­è¨€ä¸­ï¼ŒåŸºæœ¬éƒ½æä¾›äº†ä¸°å¯Œçš„å­—ç¬¦ä¸²æ“ä½œåŠŸèƒ½å‡½æ•°ï¼Œä¸€èˆ¬éƒ½åŒ…å«åç§°ä¸ºæˆ–ç±»ä¼¼äº**String** çš„ç±»æˆ–æ ‡å‡†åº“ä¸­ã€‚

åœ¨ shell è¿™æ¬¾è¯ç”Ÿäºå‡ åå¹´å‰ã€è¯­è¨€ç‰¹æ€§å¹¶æ— è·Ÿéšç°ä»£åŒ–æ¼”è¿›çš„è„šæœ¬è¯­è¨€ä¸Šï¼Œè¦å®ç°ç±»ä¼¼äºç°ä»£é«˜çº§ç¨‹åºè¯­è¨€ä¸­ **String** çš„åˆå¹¶åˆ†å‰²åŠŸèƒ½ï¼Œå¹¶æ²¡æœ‰å¯ç›´æ¥ä½¿ç”¨çš„ `split` æˆ– `join` å‡½æ•°ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰å˜é€šå’Œå®ç°æ–¹æ³•å‘¢ï¼Ÿ

å…¶å®ï¼Œåœ¨ **SHELL** å®ç°è¯¸å¦‚å­—ç¬¦ä¸²çš„ _split_ å’Œ _join_ æ“ä½œï¼Œæœ‰éå¸¸å¤šçš„æ–¹æ³•ã€‚

## å­—ç¬¦ä¸²åˆ†å‰² string spliting [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%88%86%e5%89%b2-string-spliting)

åœ¨ **shell** ä¸­ï¼Œåœ¨å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ï¼Œæœ‰ä¸¤ç§æ€è·¯ã€‚ä¸€æ˜¯ä½¿ç”¨ shell è„šæœ¬çš„è¯­è¨€ç‰¹æ€§ï¼ŒäºŒæ˜¯ä½¿ç”¨ \*nix ç³»ç»Ÿå¸¦çš„å‘½ä»¤è¡Œå·¥å…·ã€‚

### ä½¿ç”¨å­—ç¬¦æ›¿æ¢æ¥åˆ†å‰²å­—ç¬¦ä¸² [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8%e5%ad%97%e7%ac%a6%e6%9b%bf%e6%8d%a2%e6%9d%a5%e5%88%86%e5%89%b2%e5%ad%97%e7%ac%a6%e4%b8%b2)

> tr æˆ–è€… ç±»ä¼¼å®ç°å­—ç¬¦ä¸²æ›¿æ¢çš„å·¥å…·ï¼Œå¦‚ sedã€‚

```
echo "go:python:rust:js" | tr ":" "\n"
```

ä½¿ç”¨ `tr` å°†åˆ†éš”ç¬¦ `:` æ›¿æ¢æˆæ¢è¡Œç¬¦ `\n`ã€‚

è¾“å‡º:

![ä½¿ç”¨ tr åˆ†å‰²å­—ç¬¦ä¸²](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_tr.webp)

ä½¿ç”¨ tr åˆ†å‰²å­—ç¬¦ä¸²

### ä½¿ç”¨ cut åˆ†å‰²å­—ç¬¦ä¸² [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-cut-%e5%88%86%e5%89%b2%e5%ad%97%e7%ac%a6%e4%b8%b2)

```
echo "go:python:rust:js" | cut -d ":" -f 1
echo "go:python:rust:js" | cut -d ":" -f 2
echo "go:python:rust:js" | cut -d ":" -f 3
echo "go:python:rust:js" | cut -d ":" -f 4
```

ä½¿ç”¨ `cut` å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œåˆ‡å‰²ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œå®ƒæœ‰æ¯”è¾ƒæ˜æ˜¾çš„ç¼ºç‚¹ï¼Œéœ€è¦æŒ‡å®šå“ªä¸€ä¸ªåˆ—ï¼Œå¦‚æœè¾“å…¥å¤šåˆ—ï¼Œé‚£ä¹ˆéœ€è¦å¤šæ¬¡æ‰§è¡Œå‘½ä»¤ã€‚ä¸è¿‡ï¼Œå½“å­—ç¬¦ä¸²å¾ˆçŸ­çš„æƒ…å†µä¸‹ï¼Œè¿™äº›å·®å¼‚å¯ä»¥å¿½ç•¥ã€‚

è¾“å‡º:

![ä½¿ç”¨ cut åˆ†å‰²å­—ç¬¦ä¸²](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_cut.webp)

ä½¿ç”¨ cut åˆ†å‰²å­—ç¬¦ä¸²

### ä½¿ç”¨ awk åˆ†å‰²å­—ç¬¦ä¸² [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-awk-%e5%88%86%e5%89%b2%e5%ad%97%e7%ac%a6%e4%b8%b2)

```
echo "go:python:rust:js" | awk -F":" 'BEGIN {OFS="\n"} {$1=$1} {print $0}'
# æˆ–è€…
echo "go:python:rust:js" | awk 'BEGIN {FS=":"; OFS="\n"} {$1=$1; print $0}'
```

ä½¿ç”¨ awk å¤„ç†è¾“å…¥å­—ç¬¦ä¸²ï¼Œé€šè¿‡æŒ‡å®šè¾“å…¥åˆ—åˆ†éš”ç¬¦ï¼ˆ `FS`\=":" ï¼‰ã€ä¸è¾“å‡ºåˆ—åˆ†éš”ç¬¦ï¼ˆ`OFS`\="\\n"ï¼‰æ¥å®ç°ã€‚ç‰¹åˆ«éœ€è¦æŒ‡å‡ºçš„ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹è„šæœ¬ä¸­ï¼Œ`{$1=$1}` æ˜¯å¿…è¦çš„ï¼Œå®ƒå‘Šè¯‰awk å¼ºè¡Œé‡æ–°æ ¼å¼åŒ–è¡Œæ•°æ®ï¼Œä¸ç„¶ä¸ä¼šæœ‰ä»€ä¹ˆæ•ˆæœã€‚

è¾“å‡º:

![ä½¿ç”¨ awk åˆ†å‰²å­—ç¬¦ä¸²](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_awk.webp)

ä½¿ç”¨ awk åˆ†å‰²å­—ç¬¦ä¸²

### ä½¿ç”¨ IFS ç¯å¢ƒå˜é‡ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-ifs-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f)

> IFSï¼Œå…¨ç§°ä¸º Internal Field Separatorã€‚

åœ¨ zsh ä¸­ï¼Œ

```
# zsh
IFS=":" read -rA aaa <<< "go:python:rust:js"
echo "$aaa[1], $aaa[2], $aaa[3], $aaa[4]"
echo "${aaa[@]}"
```

åœ¨ bash ä¸­ï¼Œ

```
# bash
IFS=":" read -ra aaa <<< "go:python:rust:js"
echo "${aaa[0]}, ${aaa[1]}, ${aaa[2]} ,${aaa[3]}"
echo "${aaa[@]}"
```

æœ¬ä¾‹ï¼Œä½¿ç”¨ `read` å‘½ä»¤å·¥å…·è¯»å…¥å­—ç¬¦ä¸²ï¼Œé€šè¿‡ shell ç¯å¢ƒå˜é‡ `IFS` æ¥æŒ‡å®šåˆ—åˆ†éš”ç¬¦ï¼Œå¹¶å°†åˆ†å‰²çš„å„ä½åˆ—å€¼èµ‹ç»™ä¸€ä¸ªæ•°ç»„å˜é‡ã€‚é€šè¿‡æ“ä½œæ•°æ®ï¼Œå¯ä»¥è·å¾—æ‰€è¦åˆ—çš„å€¼ã€‚

éœ€è¦æŒ‡å‡ºçš„ï¼Œç”±äº zsh ä¸ bash åœ¨ shell è„šæœ¬å®ç°å·®å¼‚ï¼Œå¯¼è‡´æœ€ç»ˆ shell è„šæœ¬å­˜åœ¨ä¸åŒçš„åœ°æ–¹ã€‚zsh å†…ç½® read å‘½ä»¤; read å‘½ä»¤å‚æ•° `-A` ä¸ `-a`ï¼ˆå¯ä»¥ä½¿ç”¨ç»å¯¹è·¯å¾„æŒ‡å®š `/usr/bin/read` æ¥æ¶ˆé™¤è¿™ä¸ªå·®åˆ«ï¼‰ï¼›æ•°ç»„ä¸‹æ ‡ç´¢å¼•å·ã€‚

> âš ï¸ ä¸Šä¾‹ä¸­
> 
> -   zsh ä¸­çš„ read: æ˜¯ zsh å†…ç½®çš„ å‘½ä»¤
> 
> -   bash 3.2 ä¸­çš„ read: å®é™…ä½¿ç”¨çš„æ˜¯ `/usr/bin/read` å‘½ä»¤å·¥å…·

è¾“å‡º:

![zsh ä¸­ä½¿ç”¨ IFS ä¸æ•°ç»„](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_IFS_zsh.webp)

zsh ä¸­ä½¿ç”¨ IFS ä¸æ•°ç»„

![bash ä¸­ä½¿ç”¨ IFS ä¸æ•°ç»„](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_IFS_bash.webp)

bash ä¸­ä½¿ç”¨ IFS ä¸æ•°ç»„

### ç”¨çº¯shell å‚æ•°å±•å¼€(Parameter expansions)ä¸æ•°ç»„æ¥å®ç°åˆ†å‰²å­—ç¬¦ä¸² [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e7%94%a8%e7%ba%afshell-%e5%8f%82%e6%95%b0%e5%b1%95%e5%bc%80parameter-expansions%e4%b8%8e%e6%95%b0%e7%bb%84%e6%9d%a5%e5%ae%9e%e7%8e%b0%e5%88%86%e5%89%b2%e5%ad%97%e7%ac%a6%e4%b8%b2)

```
# bash
string="go:python:rust:js"
# 1. read -ra
read -ra aaa <<< ${string//":"/" "}
# 2. or ${string//":"/" "}
# aaa=( ${string//":"/" "} )
echo "${aaa[0]}, ${aaa[1]}, ${aaa[2]}, ${aaa[3]}"
echo "${aaa[@]}"
```

ä½¿ç”¨å‚æ•°å±•å¼€ï¼Œå°†å­—ç¬¦ä¸²ä¸­çš„ `:` æ›¿æ¢æˆç©ºæ ¼åï¼Œèµ‹å€¼ç»™ä¸€ä¸ªæ•°ç»„å˜é‡ã€‚

```
# zsh
string="go:python:rust:js"
# 1. ${(s/:/)string}
aaa=( ${(@s/:/)string} )
# 2. or ${string//":"/" "}
# aaa=( $(echo ${string//":"/" "}) )
# 3. or read -rA
# read -rA aaa <<< ${string//":"/" "}
echo "$aaa[1], $aaa[2], $aaa[3], $aaa[4]"
echo "$aaa"
```

åœ¨ zsh ä¸­ï¼Œä¹Ÿæœ‰ç±»ä¼¼ bash çš„å‚æ•°å±•å¼€ï¼Œä½†æ˜¯æœ‰å°å°åŒºåˆ«ã€‚å¦‚æœä¸ç”¨ `echo ${string//":"/" "}` è€Œæ˜¯ `${string//":"/" "}` ï¼Œé‚£ä¹ˆå¾—åˆ°çš„ aaa åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆâ€œgo python rust jsâ€ï¼‰çš„æ•°ç»„ï¼Œè€Œéå››ä¸ªå…ƒç´ ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ `( ${(s/:/)string} )` æŒ‡å®šåˆ†éš”ç¬¦ï¼ˆ":"ï¼‰ï¼Œä¸è¿‡æœ‰æ‚Ÿçš„æœ¬åœ° _bash 3.2.57_ ç¯å¢ƒå¹¶ä¸åŒ…å«è¿™ä¸ªç‰¹æ€§ã€‚ è¾“å‡º:

![zsh ä¸­ä½¿ç”¨ parameter expansion åˆ†å‰²å­—ç¬¦ä¸²](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_expansion_zsh.webp)

zsh ä¸­ä½¿ç”¨ parameter expansion åˆ†å‰²å­—ç¬¦ä¸²

![bash ä¸­ä½¿ç”¨ parameter expansion åˆ†å‰²å­—ç¬¦ä¸²](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split_by_expansion_bash.webp)

bash ä¸­ä½¿ç”¨ parameter expansion åˆ†å‰²å­—ç¬¦ä¸²

## å¤šè¡Œåˆå¹¶ string joining [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e5%a4%9a%e8%a1%8c%e5%90%88%e5%b9%b6-string-joining)

ä¸å­—ç¬¦ä¸²åˆ†å‰²ç±»ä¼¼ï¼Œåœ¨ shell ä¸­åˆå¹¶å¤šè¡Œæ–‡æœ¬ä¸ºä¸€è¡Œï¼Œä¹Ÿæœ‰å‘½ä»¤è¡Œå·¥å…·ä¸ shell è„šæœ¬ä¸¤ç§å®ç°æ–¹æ³•ã€‚å½“ç„¶ï¼Œå¦‚æœå­¦ä¹ è¿‡é«˜çº§ç¨‹åºè¯­è¨€ï¼Œé‚£ä¹ˆå¾ˆè‡ªç„¶ä¼šè”æƒ³åˆ° `for` æˆ–è€… `while` æ–¹æ³•é€è¡Œæ–‡æœ¬è¿æ¥ã€‚ä¸è¿‡ï¼Œä¸‹é¢é€‰æ‹©ä»‹ç»æ•°æ®å¤„ç†æ€ç»´çš„å‘½ä»¤å·¥å…·æ–¹æ³•ã€‚

### ä½¿ç”¨ tr æ›¿æ¢ å®ç°å¤šè¡Œåˆå¹¶ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-tr-%e6%9b%bf%e6%8d%a2-%e5%ae%9e%e7%8e%b0%e5%a4%9a%e8%a1%8c%e5%90%88%e5%b9%b6)

```
strings="go
python
rust
js
"
echo "$strings" | tr -s "\n" ", "
```

å°†æ¢è¡Œç¬¦ `\n` æ›¿æ¢ä¸ºåˆ†éš”ç¬¦ `,` ï¼Œä¹Ÿå¯ä½¿ç”¨å…·ä½“æ›¿æ¢åŠŸèƒ½çš„ sedã€awk ç­‰ã€‚

è¾“å‡º:

![ä½¿ç”¨ tr åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_tr.webp)

ä½¿ç”¨ tr åˆå¹¶å¤šè¡Œ

### ä½¿ç”¨ paste å‘½ä»¤åˆå¹¶å¤šè¡Œ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-paste-%e5%91%bd%e4%bb%a4%e5%90%88%e5%b9%b6%e5%a4%9a%e8%a1%8c)

```
strings="go
python
rust
js
"
echo "$strings "| paste -s -d"," -
```

`paste` å‘½ä»¤æ˜¯æœ€æ¥è¿‘é«˜çº§ç¨‹åºè¯­è¨€ä¸­çš„ `string.join` å‡½æ•°çš„ç”¨æ³•ã€‚`-s` è¡¨ç¤ºåˆå¹¶æˆä¸€è¡Œï¼Œ`-d","` è¡¨ç¤ºä½¿ç”¨ â€œ,â€ ä½œä¸ºåˆ—åˆ†éš”ç¬¦ï¼Œå› æ­¤å¤„ä»ç®¡é“ä¸­è¯»å–ä¸Šä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºï¼Œæ•…ç»“å°¾ä½¿ç”¨ `-` è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥è¯»å–å†…å®¹ã€‚è‹¥è¦åˆå¹¶çš„å¤šè¡Œæ–‡æœ¬å†…å®¹ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œå¦‚å« `lines.txt`ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ä½¿ç”¨ `paste -s -d"," lines.txt` æ¥åˆå¹¶ã€‚

è‡³äºè¿™ä¸ªåŠŸèƒ½çš„å‘½ä»¤å·¥å…·è¢«å«ä¸º â€œpasteâ€ï¼Œå¶å°”ä¼šå› ä¸ºä¸å¸¸ç”¨è€Œè”æƒ³ä¸èµ·è¿™ä¸ªå‘½ä»¤åç§°ã€‚

âš ï¸ **æ³¨æ„**: è‡ªå·±åŠ¨æ‰‹è¯•è¯• `paste` çš„ `-d` å‚æ•°åˆ†åˆ«ä¸º `","` ä¸ `", "` æ—¶æœ‰ä»€ä¹ˆä¸åŒï¼Œè§„å¾‹æ˜¯ä»€ä¹ˆï¼Ÿ

è¾“å‡º:

![ä½¿ç”¨ paste åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_paste.webp)

ä½¿ç”¨ paste åˆå¹¶å¤šè¡Œ

### ä½¿ç”¨ awk åˆå¹¶å¤šè¡Œ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-awk-%e5%90%88%e5%b9%b6%e5%a4%9a%e8%a1%8c)

```
strings="go
python
rust
js
"
echo "$strings" | awk '{printf("%s%s", sep, $0); sep=", "} END {print}'
```

è¿™ä¸ª awk ä¾‹å­ï¼Œè‡³å°‘æ¶‰åŠåˆ° awk ä¸‰ä¸ªçŸ¥è¯†ç‚¹:

1.  `printf` å‡½æ•°æ‰“å°çš„å­—ç¬¦ä¸²ä¸å¸¦æ¢è¡Œç¬¦ï¼Œé™¤éæ ¼å¼åŒ–æ¨¡æ¿åŒ…å« `\n` ç»“å°¾ï¼Œå¦‚ â€œ%s%s\\nâ€
2.  awk ä¸­ï¼Œå¯¹äºæœªå®šä¹‰æˆ–æ— å€¼çš„å˜é‡ï¼Œæ‰“å°æ—¶ä¸å ä½ã€‚æ³¨æ„åˆ°ï¼Œè„šæœ¬ä¸­ `sep` å˜é‡èµ‹å€¼åœ¨åï¼Œèµ·åˆ°çš„ä½œç”¨æ—¶ï¼Œå½“å¤„ç†ä¸€è¡Œæ–‡æœ¬æ—¶ï¼Œç”±äº `sep` æœªçŸ¥ï¼Œawk ä¸ä¼šåœ¨ç¬¬ä¸€è¡Œçš„å‰é¢æ·»åŠ åˆ†éš”ç¬¦ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚è¯•ä¸€è¯•å°† `sep=", "` æ”¾è‡³ `printf` å‰é¢ï¼Œä¼šæœ‰ä»€ä¹ˆä¸åŒ ğŸ¤”ï¼Ÿ
3.  `END {print}` æ˜¯åœ¨ç»“å°¾æ‰“ä¸€ä¸ªæ¢è¡Œç¬¦ï¼Œè¯•è¯•å»æ‰åæœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ

è¾“å‡º:

![ä½¿ç”¨ awk printf å‡½æ•°åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_awk_printf.webp)

ä½¿ç”¨ awk printf å‡½æ•°åˆå¹¶å¤šè¡Œ

```
strings="go
python
rust
js
"
echo "$strings" | awk '{s=(s d)$0; d=", "  } END {print s}'
```

ä¸ä¸Šä¾‹ç•¥æœ‰ä¸åŒï¼Œè¿™ä¸ª awk ç¤ºä¾‹ï¼Œæ²¡æœ‰ä½¿ç”¨ `printf` é€è¡Œè¾“å‡ºï¼Œè€Œæ˜¯æ¯ä¸€è¡Œä½¿ç”¨åˆ†éš”ç¬¦æ‹¼æ¥èµ·æ¥ï¼Œä¿å­˜åœ¨å˜é‡ `s`ï¼Œåœ¨ç»“å°¾ä¸€æ¬¡æ€§æ‰“å°ã€‚ åŒæ ·ï¼Œå½“å¤„ç†æ¯ä¸€è¡Œæ–‡æœ¬æ—¶ï¼Œ`s` ä¸ `d` æ­¤æ—¶å‡ä¸ºç©ºï¼Œæ•… `s=(s d)$0` ä¸º `s=$0`ï¼Œå½“å¤„ç†ç¬¬ Nï¼ˆN > 1ï¼‰è¡Œæ—¶ï¼Œ`s=(s d)$0` å®é™…ä¸º â€œå‰N-1è¡Œåˆå¹¶ + åˆ†éš”ç¬¦ + ç¬¬Nè¡Œâ€ï¼ˆæ­¤å¤„ `+` è¡¨ç¤ºå­—ç¬¦ä¸²è¿æ¥ï¼‰ã€‚

è¾“å‡º:

![ä½¿ç”¨ awk è¡Œæ‹¼æ¥åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_awk_concat.webp)

ä½¿ç”¨ awk è¡Œæ‹¼æ¥åˆå¹¶å¤šè¡Œ

### ä½¿ç”¨ printf æ ¼å¼åŒ–å‡½æ•°åˆå¹¶å¤šè¡Œ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-printf-%e6%a0%bc%e5%bc%8f%e5%8c%96%e5%87%bd%e6%95%b0%e5%90%88%e5%b9%b6%e5%a4%9a%e8%a1%8c)

```
# bash
strings="go
python
rust
js
"
aaa=(`echo $strings`)
printf "%s, " "${aaa[@]}" # '@' not '*'
echo; printf "%s, " "${aaa[*]}" # ä¸èµ·ä½œç”¨
```

`printf` å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•ä¸ awk printf å‡½æ•°ç±»ä¼¼ï¼Œå®ƒä¹Ÿä¸ç°ä»£é«˜çº§ç¨‹åºè¯­è¨€çš„ `string.format` æ–¹æ³•é›·åŒã€‚è¿™ä¸ª `printf` å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯ä»¥æ¥æ”¶å¤šä¸ªå‚æ•°ï¼Œå¦‚`printf "%s," hello world`ï¼Œä¼šè¾“å‡º `hello,world,`ã€‚`printf` å¹¶ä¸ä¼šä¸ºè¾“å‡ºçš„ç»“å°¾æ·»åŠ ä¸€ä¸ªæ¢è¡Œç»“æŸç¬¦ï¼Œæ‰€ä»¥åœ¨ä½ çš„ç»ˆç«¯é‡Œæ‰§è¡Œæ—¶ï¼Œç»“å°¾ä¼šæç¤º â€œEOFâ€ã€‚å¯¹äºæœ¬ä¾‹æƒ³æ¼”ç¤ºçš„åŠŸèƒ½ï¼Œè¿™ä¸ªé—®é¢˜å¹¶ä¸ä¼šé€ æˆå½±å“ã€‚åœ¨ bash ä¸ zsh ä¸­éƒ½æœ‰ç›¸åŒçš„ç”¨æ³•ã€‚éœ€è¦å¦å¤–è¯´æ˜çš„ï¼Œ

1.  è¿™ä¸ªæ–¹æ³•å¯¹äºè¡Œæ–‡æœ¬ä¸­åŒ…å« **ç©ºæ ¼** æ—¶ï¼Œä¼šå¤±æ•ˆï¼Œé—®é¢˜åœ¨äº `aaa=( $(echo $strings) )` ï¼Œä¸èƒ½æŒ‰æˆ‘ä»¬é¢„æœŸé‚£æ ·æŒ‰æ¢è¡Œéš”æ–­ï¼Œç©ºæ ¼ä¼šè¢«è®¤ä¸ºæ˜¯æ•°ç»„å…ƒç´ çš„åˆ†éš”ç¬¦ã€‚
2.  `printf "%s, " "${aaa[@]}"` ï¼Œè¾“å…¥çš„å‚æ•°ä¸º `${aaa[@]}`ï¼Œè€Œä¸æ˜¯ `"${aaa[*]}`ï¼ŒåŒºåˆ«åœ¨äº `@` æ˜¯å°†æ•°ç»„å±•å¼€ä¸ºå¤šä¸ªå‚æ•°ï¼Œè€Œ `*` è¡¨ç¤ºæ•°ç»„å±•å¼€ååšä¸ºä¸€ä¸ªæ•´ä½“ã€‚ä½ è‡ªå·±å¯ä»¥è¯•ä¸€è¯•è¿™ä¸ªå·®å¼‚å¦‚ä½•ä½“ç°ã€‚

```
# zsh
strings="go
python
rust
js
"
# 1. use echo
# aaa=(`echo $strings`)
# 2. use <<<
aaa=(`<<< $strings`)
printf "%s, " "${aaa[@]}" # '@' not '*'
echo; printf "%s, " "${aaa[*]}" # ä¸èµ·ä½œç”¨
```

è¾“å‡º:

![åœ¨ bash ä¸­ä½¿ç”¨ printf åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_printf_bash.webp)

åœ¨ bash ä¸­ä½¿ç”¨ printf åˆå¹¶å¤šè¡Œ

![åœ¨ zsh ä¸­ä½¿ç”¨ printf åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_printf_zsh.webp)

åœ¨ zsh ä¸­ä½¿ç”¨ printf åˆå¹¶å¤šè¡Œ

### ä½¿ç”¨ IFS æ•°ç»„å±•å¼€åˆå¹¶å¤šè¡Œ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e4%bd%bf%e7%94%a8-ifs-%e6%95%b0%e7%bb%84%e5%b1%95%e5%bc%80%e5%90%88%e5%b9%b6%e5%a4%9a%e8%a1%8c)

```
strings="go
python
rust
js
"
aaa=(`echo $strings`)
IFS=","; echo "${aaa[*]}"
IFS=","; echo "${aaa[@]}" # ä¸èµ·ä½œç”¨
```

æœ¬ä¾‹ä½¿ç”¨çš„æŠ€å·§æ˜¯æ•°ç»„å…ƒç´ å±•å¼€ï¼Œå®ƒå—åˆ° `IFS` å˜é‡çš„å½±å“ã€‚ä¸ä¸Šä¾‹ä½¿ç”¨ `printf` å‡½æ•°æ­£å¥½ç›¸åã€‚`${aaa[*]}` åœ¨å±•å¼€åè¿æ¥å„å…ƒç´ æ—¶ï¼Œä¼šä½¿ç”¨ `IFS` å€¼ä½œä¸ºåˆ†éš”ç¬¦ï¼Œè€Œ `${aaa[@]}` æ˜¯å±•å¼€ä¸ºå¤šä¸ªå€¼ï¼Œæ•…ä¸ä¼šä½¿ç”¨ `IFS`ã€‚å¦å¤–ï¼Œå®ƒåŒæ ·å—åˆ° `aaa=( $(echo $strings) )` çš„é™åˆ¶ï¼Œå½“è¡Œæ–‡æœ¬ä¸­åŒ…å«ç©ºæ ¼æ—¶ï¼Œç»“æœä¼šä¸æ­£ç¡®ã€‚

è¾“å‡º:

![ä½¿ç”¨ IFS å±•å¼€æ•°ç»„åˆå¹¶å¤šè¡Œ](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join_by_IFS.webp)

ä½¿ç”¨ IFS å±•å¼€æ•°ç»„åˆå¹¶å¤šè¡Œ

### å»é™¤å°¾éƒ¨çš„åˆ†éš”ç¬¦ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e5%8e%bb%e9%99%a4%e5%b0%be%e9%83%a8%e7%9a%84%e5%88%86%e9%9a%94%e7%ac%a6)

åœ¨æœ¬æ–‡å¤šè¡Œæ–‡æœ¬åˆå¹¶çš„éƒ¨åˆ†ä¾‹å­ä¸­ï¼Œzsh ä¾‹å­æ‰“å°çš„å‡ºç°äº† `%`ï¼Œè¿™æ˜¯ç”±äº iterm2 æ”¯æŒæ˜¾ç¤ºç»“å°¾ç‰¹æ®Šç¬¦å· EOFï¼Œè€Œåœ¨bash ä¾‹å­ä¸­å‡ºç°äº† `[ble EOF]` å­—æ ·ï¼Œè¿™æ˜¯å› ä¸ºæœ‰æ‚Ÿçš„ bash ç¯å¢ƒå®‰è£…äº† å‘½ä»¤è¡Œè¯­æ³•é«˜äº®åŒ… `ble.sh` çš„æç¤ºæ‰€è‡´ã€‚éƒ¨åˆ†ä¾‹å­çš„è¾“å‡ºç»“æœè¿˜å¸¦æœ‰åˆ†éš”ç¬¦ã€‚

é—®é¢˜åœ¨äºå¦‚æœå»æ‰ç»“å°¾ä»¤äººè®¨åŒçš„è¿™ä¸ªæç¤ºå‘¢ï¼Ÿï¼ˆè¯´çš„æ˜¯å¦‚ä½•ä½¿è¾“å‡ºæ²¡æœ‰è¿™ä¸ªç¬¦å·ï¼Œè€Œä¸æ˜¯å·¥å…·é…ç½®ï¼‰

è¿™ä¸ªé—®é¢˜å°±æ¯”è¾ƒç®€å•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ›¿æ¢å·¥å…·ã€‚

```
strings="go
python
rust
js
"
aaa=(`echo $strings`)
bbb=$(printf "%s, " "${aaa[@]}")
echo "${bbb%, }"
```

æŠŠè¾“å‡ºçš„ç»“æœå…ˆä¸´æ—¶ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼Œè¿™é‡Œç”¨ `bbb`ï¼Œä½¿ç”¨ shell parameter expansions æ–¹æ³•ï¼Œ`${å€¼%æ›¿æ¢ä¸²}`ï¼Œåˆ™ä¼šæ›¿æ¢æ‰ç»“å°¾åŒ¹é…åˆ°çš„ç¬¦å·ä¸²ã€‚æ³¨æ„ï¼Œä¸Šè¿°çš„ `EOF` æ²¡æœ‰å½±å“å®é™…çš„æ“ä½œï¼Œå½“ä½¿ç”¨ `echo` æˆ–è€… `printf "%s\n"` æ‰“å°å˜é‡æ—¶ï¼Œè¾“å‡ºçš„ç»“æœä¼šæ¢è¡Œï¼Œè¿™ä¸ª `EOF` æç¤ºä¹Ÿå°±è‡ªç„¶æ¶ˆå¤±äº†ã€‚

è¾“å‡º:

![å»æ‰ç»“å°¾çš„åˆ†éš”ç¬¦](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/trim_line.webp)

å»æ‰ç»“å°¾çš„åˆ†éš”ç¬¦

## æœ¬æ–‡ä¸­è„šæœ¬çš„å®éªŒç¯å¢ƒ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e6%9c%ac%e6%96%87%e4%b8%ad%e8%84%9a%e6%9c%ac%e7%9a%84%e5%ae%9e%e9%aa%8c%e7%8e%af%e5%a2%83)

-   OS: MacOS 13.2.1
-   zsh: 5.8.1
-   bash: 3.2.57(1)-release

![shell ç‰ˆæœ¬](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/shell_version.webp)

shell ç‰ˆæœ¬

å› ä¸ºç‰ˆæœ¬é—®é¢˜ï¼Œæœ‰å¯èƒ½è¿˜å­˜åœ¨å…¶å®ƒçš„æ–¹æ³•ã€‚

-   bash 4.4 åŒ…å« mapfile ï¼ˆreadarray) å‘½ä»¤ï¼Œä½ å¯ä»¥å°è¯•ä½¿ç”¨è¿™ä¸ªå‘½ä»¤å¦‚ä½•è¯»å–å¤šè¡Œæ–‡æœ¬åˆ°æ•°ç»„ï¼Œä»¥åŠåˆå¹¶å¤šè¡Œã€‚

## æ±‡æ€»çš„ç¤ºä¾‹è„šæœ¬ [#](https://youwu.today/blog/hwo-to-spliting-or-joining-string-in-shell-scripts/#%e6%b1%87%e6%80%bb%e7%9a%84%e7%a4%ba%e4%be%8b%e8%84%9a%e6%9c%ac)

æ”¶é›†äº†ä¸Šæ–‡å„ä¸ªä¾‹å­çš„æ¼”ç¤ºshellè„šæœ¬:

-   [split.sh](https://youwu.today//blog/hwo-to-spliting-or-joining-string-in-shell-scripts/split.sh)
-   [join.sh](https://youwu.today//blog/hwo-to-spliting-or-joining-string-in-shell-scripts/join.sh)

åœ¨å‘½ä»¤è¡Œä½¿ç”¨ `bash è„šæœ¬æ–‡æœ¬å` æˆ–è€… `zsh è„šæœ¬æ–‡ä»¶å` å³å¯æ‰§è¡Œè„šæœ¬ã€‚